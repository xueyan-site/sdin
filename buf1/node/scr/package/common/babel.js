"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getBabelOptions=l;var e=require("lodash"),u=require("../../../utl/path"),t=require("../../../utl/read");function r(n){var o=(0,e.mapValues)(n.alias||{},function(e){return n.withRoot(e)}),i=Object.keys(o);if(!(i.length<=0))return[(0,u.cmdNmPath)("babel-plugin-module-resolver"),{resolvePath:function(e,t){for(var r="",a=0;a<i.length;a++){var l=i[a];if(l[0]===e[0]&&e.startsWith(l)){r=l;break}}return r?(0,u.relativePath)(n.withRoot(e.replace(r,o[r])),t):e}}]}var a=(0,t.withCache)(function(e,t){return{presets:[[(0,u.cmdNmPath)("@babel/preset-env"),{modules:"web"!==t.target&&"cjs"}],t.project.useReact&&(0,u.cmdNmPath)("@babel/preset-react"),(0,u.cmdNmPath)("@babel/preset-typescript")].filter(Boolean),plugins:[r(t.project),(0,u.cmdNmPath)("@babel/plugin-transform-runtime")].filter(Boolean)}});function l(e,t){var r=e.name+t;return a(r,{project:e,target:t})}