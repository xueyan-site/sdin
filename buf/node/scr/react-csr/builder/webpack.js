"use strict";var e=require("@babel/runtime/helpers/interopRequireDefault"),i=require("@babel/runtime/helpers/typeof");Object.defineProperty(exports,"__esModule",{value:!0}),exports.createWebpack=h;var n=e(require("@babel/runtime/regenerator")),u=e(require("@babel/runtime/helpers/toConsumableArray")),t=e(require("@babel/runtime/helpers/asyncToGenerator")),a=require("lodash"),s=e(require("mini-css-extract-plugin")),o=require("../../../utl/path"),c=require("../common/page"),l=require("../common/module"),p=r(require("webpack"));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function r(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};t=m(t);if(t&&t.has(e))return t.get(e);var r,n,u={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&((n=a?Object.getOwnPropertyDescriptor(e,r):null)&&(n.get||n.set)?Object.defineProperty(u,r,n):u[r]=e[r]);return u.default=e,t&&t.set(e,u),u}function h(e){return f.apply(this,arguments)}function f(){return(f=(0,t.default)(n.default.mark(function e(t){var r;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.getPages)(t,!1);case 2:return r=e.sent,e.abrupt("return",(0,p.default)({mode:"production",devtool:"cheap-module-source-map",context:t.root,entry:r.entry,output:{path:t.webDist,publicPath:t.path,hashDigestLength:12,filename:"js/[name].[chunkhash].js",chunkFilename:"js/[id].[chunkhash].js"},module:{rules:(0,l.getRules)(t,!1)},externals:t.module.externals,resolve:{extensions:[".tsx",".ts",".jsx",".js",".json"],alias:(0,a.mapValues)(t.alias,function(e){return t.withRoot(e)})},resolveLoader:{modules:[t.mdl,(0,o.cmdNmPath)()]},plugins:[new p.ProgressPlugin,new s.default({filename:"css/[name].[contenthash].css",chunkFilename:"css/[id].[contenthash].css"})].concat((0,u.default)(r.plugins)),optimization:{runtimeChunk:{name:function(e){return e.name+"_rc"}},splitChunks:{cacheGroups:{common:{name:"com_cc",chunks:"initial",minSize:1,priority:0,minChunks:2},vendor:{name:"vdr_cc",test:/[\\/]node_modules[\\/]/,chunks:"initial",priority:10,minChunks:2}}}}}));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}