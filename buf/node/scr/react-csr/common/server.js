"use strict";var e=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.webStatic=n,exports.webError=o;var u=e(require("@babel/runtime/regenerator")),r=e(require("@babel/runtime/helpers/asyncToGenerator")),t=e(require("koa-mount")),a=e(require("koa-static"));function n(e){void 0===e.maxAge&&(e.maxAge=31536e6),e.maxAge&&(e.immutable=!0),e.root||(e.root=e.dist);var r=(0,a.default)(e.dist,e);return e.prefix?(0,t.default)(e.prefix,r):r}function o(a){var n=a.project.getPage(a.project.error);return function(){var t=(0,r.default)(u.default.mark(function e(r,t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:if(400<=r.status)throw new Error;e.next=5;break;case 5:e.next=16;break;case 7:if(e.prev=7,e.t0=e.catch(0),n&&a.reader)return e.next=12,a.reader(r,n,e.t0);e.next=14;break;case 12:e.next=16;break;case 14:r.set("content-type","text/html"),r.body=null===e.t0||void 0===e.t0?void 0:e.t0.message;case 16:case"end":return e.stop()}},e,null,[[0,7]])}));return function(e,r){return t.apply(this,arguments)}}()}