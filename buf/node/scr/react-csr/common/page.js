"use strict";var e=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPages=a;var t=e(require("@babel/runtime/regenerator")),r=e(require("@babel/runtime/helpers/asyncToGenerator")),l=e(require("fs-extra")),s=e(require("html-webpack-plugin")),c=require("../../../utl/path"),o=require("./script"),h=require("./template");function a(e,t){return u.apply(this,arguments)}function u(){return(u=(0,r.default)(t.default.mark(function e(r,a){var u,n,i,p;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=[],n={},i=[],p=(0,c.cmdNmPath)("webpack-hot-middleware/client?reload=true"),r.pageList.forEach(function(e){var t=r.withBuf("entry",e.path+".jsx");u.push(l.default.outputFile(t,(0,o.getScriptString)(e,a))),n[e.path]=a?[p,t]:t,i.push(new s.default({minify:!0,inject:!0,chunks:[e.path],filename:e.path+".html",templateContent:(0,h.getTemplateString)(e,a)}))}),e.next=7,Promise.all(u);case 7:return e.abrupt("return",{entry:n,plugins:i});case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}