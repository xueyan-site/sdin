"use strict";var e=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=e(require("@babel/runtime/regenerator")),i=e(require("@babel/runtime/helpers/asyncToGenerator")),o=e(require("@babel/runtime/helpers/classCallCheck")),u=e(require("@babel/runtime/helpers/createClass")),n=e(require("@babel/runtime/helpers/inherits")),c=e(require("@babel/runtime/helpers/possibleConstructorReturn")),l=e(require("@babel/runtime/helpers/getPrototypeOf")),s=e(require("chalk")),p=e(require("ora")),f=e(require("fs-extra")),t=e(require("./executor")),d=require("../utl/path"),h=require("../utl/write"),y=require("../utl/exec");function m(r){var a=b();return function(){var e,t=(0,l.default)(r);return t=a?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,c.default)(this,t)}}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var a=function(e){(0,n.default)(c,e);var t,a=m(c);function c(e,t){(0,o.default)(this,c);var r=a.call(this,e),t=e.template||t;return r.templatePath=(0,d.cmdPath)("tmp/".concat(t)),r}return(0,u.default)(c,[{key:"generateProject",value:(t=(0,i.default)(r.default.mark(function e(){var t;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f.default.existsSync(this.project.root))throw Error("".concat(s.default.yellow(this.project.name)," is already exists"));e.next=2;break;case 2:return t=(0,p.default)("".concat(this.project.type," template ").concat(s.default.blue("copying"))).start(),e.prev=3,e.next=6,(0,h.deepCopy)(this.templatePath,this.project.root,(0,h.getReplaceHandler)(this.project));case 6:t.succeed("".concat(this.project.type," template ").concat(s.default.blue("copied successfully"))),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),t.fail("".concat(this.project.type," node modules ").concat(s.default.red("copy failed"))),console.error(e.t0);case 13:case"end":return e.stop()}},e,this,[[3,9]])})),function(){return t.apply(this,arguments)})},{key:"initializeGitRepository",value:function(){var t=this.project.withRoot(".git");if(!f.default.existsSync(t)){t=(0,p.default)("".concat(this.project.name," git repository ").concat(s.default.blue("initializing"))).start();try{(0,y.executeSync)("cd ".concat(this.project.root,' && git init && git add . && git commit -m "chore: project created"')),t.succeed("".concat(this.project.name," git repository ").concat(s.default.blue("initialized successfully")))}catch(e){t.fail("".concat(this.project.name," git repository ").concat(s.default.red("initialization failed"))),console.error(e)}}}}]),c}(t.default);exports.default=a;